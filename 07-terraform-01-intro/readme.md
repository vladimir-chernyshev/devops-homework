
Домашнее задание к занятию "7.1. Инфраструктура как код"
===
1. Задача 1. Выбор инструментов.
---
Вам, как девопс инженеру, будет необходимо принять решение об инструментах для организации инфраструктуры. На данный момент в вашей компании уже используются следующие инструменты:

- остатки Сloud Formation,  
   (инициализация ресурсов, неизменяемая инфраструктура, декларативный язык конфигурирования);  
- некоторые образы сделаны при помощи Packer,  
   (шаблонизация конфигурации серверов - ключевой аспект неизменяемой инфраструктуры - ключевой аспект неизменяемой инфраструктуры, виртуальные машины);  
- год назад начали активно использовать Terraform,  
   (инициализация ресурсов, неизменяемая инфраструктура, декларативный язык конф
игурирования);
- разработчики привыкли использовать Docker,
   (шаблонизация конфигурации серверов - ключевой аспект неизменяемой инфраструктуры, контейнеры);  
- уже есть большая база Kubernetes конфигураций,  
   (оркестратор контейнеризации);  
- для автоматизации процессов используется Teamcity,
- также есть совсем немного Ansible скриптов,  
   (управление конфигурацией, изменяемая инфраструктура, процедурный язык конфигурирования);  
- и ряд bash скриптов для упрощения рутинных задач.  
   (отсутствие идемпонентности)

Для этого в рамках совещания надо будет выяснить подробности о проекте, что бы в итоге определиться с инструментами:

 1. Какой тип инфраструктуры будем использовать для этого проекта: изменяемый или не изменяемый?  
  Выберу неизменяемую инфраструктуру, так как изменяемая подвержена дрейфу конфигурации;  
 2. Будет ли центральный сервер для управления инфраструктурой?  
  Выберу вариант без централизованного сервера, чтобы минимизировать дополнительную инфраструктуру и обслуживание;  
 3. Будут ли агенты на серверах?  
  Из тех же соображений выберу вариант agentless;  
 4. Будут ли использованы средства для управления конфигурацией или инициализации ресурсов?
  У Ansible, CloudFormation, Heat и Terraform нет центрального сервера и не требуют установки агентов

В связи с тем, что проект стартует уже сегодня, в рамках совещания надо будет определиться со всеми этими вопросами.  

 Буду использовать serverless agentless связку terraform (конфигурация и создание виртуальных машин) + docker(podman) (конфигурация и создание контейнеров на VM) + ansible (конфигурация и развертывание приложений в контейнерах).

2. Установка терраформ.
---
Установите терраформ при помощи менеджера пакетов используемого в вашей операционной системе. В виде результата этой задачи приложите вывод команды terraform --version.

 В свете известных событий качал бинарник с помощью VPN прямо с (сайта Hashicorp)[https://releases.hashicorp.com/terraform/1.1.7/terraform_1.1.7_linux_amd64.zip]:

		[v@nb-chernyshev ~]$ ./terraform -version
		Terraform v1.1.7
		on linux_amd64

3. Поддержка легаси кода.
---
В какой-то момент вы обновили терраформ до новой версии, например с 0.12 до 0.13. А код одного из проектов настолько устарел, что не может работать с версией 0.13. В связи с этим необходимо сделать так, чтобы вы могли одновременно использовать последнюю версию терраформа установленную при помощи штатного менеджера пакетов и устаревшую версию 0.12.

Так как на сайте Hashicorp размещена только текущая версия **terraform**, Приложить вывод двух различных версий команды **terraform -version** не смогу, но

		[v@nb-chernyshev ~]$ ldd ./terraform 
			not a dynamic executable

так как программа статически скомпонована в единый файл, предположу, что для поддержки legacy code достаточно устаревшую версию бинарника не удалять, а переименовывать, например, с суффиксом версии.
